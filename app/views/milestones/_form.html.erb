

<%= form_for [@person, @person.milestones.build], html: { class:'timeline-form main-form slide-on-click clearfix','data-toggle': 'validator'}  do |m| %>
    <h1 class=""><span class="glyphicon glyphicon-check"></span> <%= t('mil_create') %></h1>
    <div class="form-slide">
        <div class="form-group">
          <%= m.label t('mil_title'), class: "control-label" %>
          <%= m.text_field :title, class: "form-control", 'data-validation':"required" %>
        </div>

        <div class="form-group">
          <%= m.label t('mil_description'), class: "control-label" %>
          <%= m.text_field :description, class: "form-control", 'data-validation':"required" %>
        </div>


        <div class="row">
          <div class="form-group col-xs-6">
            <%=  m.label t('category'), class: "control-label" %>
            <select name="category_id" class="chosen">
                <option value='<%=nil%>'>Ninguna</option>
                <% Category.all.each do |ca| %>
                    <option value=<%=ca.id%> > <%=ca.name%></option>
                <% end %>
            </select>
          </div>

          <div class="form-group col-xs-6">
            <%=  m.label t('mil_icon'), class: "control-label" %>
            <%=  m.text_area :icon, class: "form-control" %>
          </div>

        </div>

        <div class="row">

          <div class="form-group col-xs-6">
            <%= m.label t('mil_start_date'), class: "control-label" %>
            <div class="input-group">
              <%= m.text_field :start_date, class: "form-control", "data-provide":"datepicker", 'data-validation-format': "dd/mm/yyyy"%>
              <div class="input-group-addon"><span class="glyphicon glyphicon-th" aria-hidden="true"></span></div>
            </div>
          </div>

          <div class="form-group col-xs-6">
            <%= m.label t('mil_due_date'), class: "control-label" %>
            <div class="input-group">
              <%= m.text_field :due_date, class: "form-control", "data-provide":"datepicker", 'data-validation-format': "dd/mm/yyyy"%>
              <div class="input-group-addon"><span class="glyphicon glyphicon-th" aria-hidden="true"></span></div>
            </div>
          </div>

        </div>
        <div class="row">

          <div class="form-group col-xs-12">
            <%= m.label 'Tags', class: "control-label" %>

            <%= select_tag(:tags, options_from_collection_for_select(@tags, :id, :name), :multiple => true, class: "chzn-select", 'data-placeholder'=> t('select_tags'), 'style'=> 'width:100%') %>

          </div>
          <div class="form-group col-xs-12">
            <%= m.label t('assign_to'), class: "control-label" %>:<br>
            (<%= @person.name+t('mil_assigned') %>)
            <%= select_tag(:people, options_from_collection_for_select(@people, :id, :name), :multiple => true, class: "chzn-select", 'data-placeholder'=> t('select_people'), 'style'=> 'width:100%') %>

          </div>

        </div>

        <%= m.hidden_field(:created_at, :value=>Time.now) %>
        <%= m.hidden_field(:updated_at, :value=>Time.now) %>
        <%= m.button t('mil_create'), :type => 'submit', class: "btn btn-default" %>
    </div>
<% end %>
<script> $(".chzn-select").chosen();</script>