<div class="container">
  <div class="row">
    <div class="card-col col-xs-4 col-xs-offset-4">


    <%= form_for @milestone do |m| %>
        <h1><span class="glyphicon glyphicon-check"></span> <%= t('mil_create') %></h1>
          <div class="form-group">
              <%= m.label t('mil_title'), class: "control-label" %>
              <%= m.text_field :title, class: "form-control", 'data-validation':"required" %>
          </div>

          <div class="form-group">
            <%= m.label t('mil_description'), class: "control-label" %>
            <%= m.text_field :description, class: "form-control", 'data-validation':"required" %>
          </div>


          <div class="row">
            <div class="form-group col-xs-6">
              <%= m.label t('mil_status'), class: "control-label" %>
              <%= m.text_field :status, class: "form-control", 'data-validation': "status" %>
              <%= t('values')+': rejected, pending, done' %>
            </div>



            <div class="form-group col-xs-6">
              <%=  m.label t('mil_icon'), class: "control-label" %>
              <%=  m.text_area :icon, class: "form-control" %>
            </div>
          </div>
          <div>
            <%= m.label t('milestone_category')%>
            <br>
            <%= m.select :category_id, Category.all.collect {|t| [t.name, t.id]}, {}, {:multiple => false, :class => "chzn-select category", 'style'=> 'width:100%'} %>

          </div>
          <div class="form-group feedback_autor">
            <%=  m.label t('milestone_reviewer')%>
            <br>
            <%= m.select :feedback_author_id, Person.all.collect {|t| [t.name, t.id]}, {}, { :multiple => false, :class => "chzn-select select_author", 'style'=> 'width:100%'} %>
          </div>
          <div class="row">

            <div class="form-group col-xs-6">
              <%= m.label t('mil_start_date'), class: "control-label" %>
              <div class="input-group">
                <%= m.text_field :start_date, class: "form-control", "data-provide":"datepicker", 'data-validation-format': "dd/mm/yyyy"%>
                <div class="input-group-addon"><span class="glyphicon glyphicon-th" aria-hidden="true"></span></div>
              </div>
            </div>

            <div class="form-group col-xs-6">
              <%= m.label t('mil_due_date'), class: "control-label" %>
              <div class="input-group">
                <%= m.text_field :due_date, class: "form-control", "data-provide":"datepicker", 'data-validation-format': "dd/mm/yyyy"%>
                <div class="input-group-addon"><span class="glyphicon glyphicon-th" aria-hidden="true"></span></div>
              </div>
            </div>

          </div>
          <div class="row">

            <div class="form-group col-xs-12">
              <%= m.label 'Tags', class: "control-label" %>

              <%= select_tag(:tags, options_from_collection_for_select(@tags, :id, :name), :multiple => true, class: "chzn-select", 'data-placeholder'=> t('select_tags'), 'style'=> 'width:100%') %>

            </div>
          </div>

              <%= m.hidden_field(:created_at, :value=>Time.now) %>
              <%= m.hidden_field(:updated_at, :value=>Time.now) %>
        <%= m.button t('mil_create'), :type => 'submit', class: "btn btn-default" %>

     </div>
     <% end %>
  </div>
 </div>

<script> $(".chzn-select").chosen();</script>
<script>
    $('.category').change( function() {
        var selectedValue = $(this).find('option:selected').val();
        if (selectedValue==2){
            $('.feedback_autor').show('slow');
        }
        if (selectedValue!=2){
            $('.feedback_autor').hide('slow');
            $('.select_author').val(' ').trigger("select_author:updated");
        }
    });

</script>